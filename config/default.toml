# UAIP Hub Default Configuration

[server]
host = "0.0.0.0"
port = 8443
workers = 4

[database]
url = "postgresql://uaip:uaip_password_dev@localhost:5432/uaip"
max_connections = 20
min_connections = 5
connection_timeout_seconds = 30

[redis]
url = "redis://:uaip_redis_dev@localhost:6379"
pool_size = 10
connection_timeout_seconds = 5

[nats]
url = "nats://localhost:4222"
max_reconnects = 10
reconnect_delay_ms = 1000

[auth]
jwt_secret = "CHANGE_IN_PRODUCTION"
jwt_expiry_seconds = 3600
certificate_validity_days = 365
enable_certificate_auth = true
enable_api_key_auth = false

[security]
tls_enabled = false
tls_cert_path = "./certs/server.crt"
tls_key_path = "./certs/server.key"
rate_limit_per_minute = 100
rate_limit_burst = 20
max_message_size_bytes = 10485760
enable_encryption = true
encryption_algorithm = "aes-256-gcm"

[session]
timeout_seconds = 3600
heartbeat_interval_seconds = 30
heartbeat_timeout_seconds = 90
max_concurrent_sessions_per_device = 3

[message]
default_ttl_ms = 5000
default_priority = "normal"
max_retries = 3
retry_backoff_ms = 1000

[telemetry]
prometheus_enabled = true
prometheus_port = 9091
log_level = "info"
log_format = "json"

[cors]
enabled = true
allowed_origins = ["*"]
allowed_methods = ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
allowed_headers = ["*"]
max_age_seconds = 3600

[development]
dev_mode = true
pretty_logs = true
enable_debug_endpoints = true
